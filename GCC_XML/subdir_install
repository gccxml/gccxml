# Helper script for installation of compiler-specific support
# libraries from each subdirectory.  This should NOT be run directly.
# It is sourced by other install scripts.

# Protect against accidental execution.
if [ x"$RUNNING_SUBDIR_INSTALL" == x ] ; then
  echo -e "This script should not be run directly!\n" \
          "It is designed to be sourced by other installation scripts.\n" \
          "Run \"make\" for installation instructions."
  exit
fi

# Use the installer from the root of the source tree.
INSTALL="../install-sh -c"
INSTALL_PROGRAM="${INSTALL}"
INSTALL_DATA="${INSTALL} -m 644"

# Use default prefix unless an argument was given to the script that sourced
# this one.
PREFIX=/usr/local
if [ x"$1" != x ] ; then
  PREFIX=$1
fi

# Create the installation subdirectory.
if [ ! -d ${PREFIX}/share/GCC_XML/${SUBDIR} ] ; then
  echo "Making directory ${PREFIX}/share/GCC_XML/${SUBDIR} "
  mkdir -p ${PREFIX}/share/GCC_XML/${SUBDIR} &&
  chmod 755 ${PREFIX}/share/GCC_XML/${SUBDIR}
fi

# Install all headers from this directory listed in the "HEADERS" variable.
for i in $HEADERS ; do
  echo "Installing ${SUBDIR}/$i ..."
  if [ -f $i ] ; then
     ${INSTALL_DATA} $i ${PREFIX}/share/GCC_XML/${SUBDIR}
  else
     echo " ERROR!!! Unable to find: ${SUBDIR}/$i "
  fi
done

# Install all programs from this directory listed in the "PROGRAMS" variable.
for i in $PROGRAMS ; do
  echo "Installing ${SUBDIR}/$i ..."
  if [ -f $i ] ; then
     ${INSTALL_PROGRAM} $i ${PREFIX}/share/GCC_XML/${SUBDIR}
  else
     echo " ERROR!!! Unable to find: ${SUBDIR}/$i "
  fi
done

